/**
 * BrainSAIT Healthcare Design System - Arabic Typography & RTL
 * Comprehensive Arabic typography system optimized for healthcare documentation
 * Supports Cairo, Noto Sans Arabic, and clinical readability requirements
 */

/* =================================
   FONT FACE DECLARATIONS
   ================================= */

/* Cairo Font Family - Primary Arabic font for healthcare */
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap');

/* Noto Sans Arabic - Fallback Arabic font */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@100;200;300;400;500;600;700;800;900&display=swap');

/* Inter Font - Primary English font */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');

/* =================================
   ARABIC RTL BASE STYLES
   ================================= */

/* RTL Direction Support */
[dir="rtl"] {
  direction: rtl;
  text-align: right;
}

[dir="ltr"] {
  direction: ltr;
  text-align: left;
}

/* Language-specific font application */
html[lang="ar"],
html[lang="ar-SA"],
.arabic-text,
[dir="rtl"] {
  font-family: var(--font-arabic-primary);
  font-feature-settings: 'liga' on, 'kern' on, 'calt' on;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html[lang="en"],
html[lang="en-US"],
.english-text,
[dir="ltr"] {
  font-family: var(--font-english-primary);
  font-feature-settings: 'liga' on, 'kern' on, 'calt' on;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* =================================
   ARABIC TYPOGRAPHY CLASSES
   ================================= */

/* Arabic Heading Styles */
.arabic-heading-1,
.ar-h1 {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-4xl);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: -0.025em;
  color: var(--clinical-text-primary);
  margin-bottom: var(--space-clinical-lg);
}

.arabic-heading-2,
.ar-h2 {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-3xl);
  font-weight: var(--font-semibold);
  line-height: var(--leading-tight);
  letter-spacing: -0.025em;
  color: var(--clinical-text-primary);
  margin-bottom: var(--space-clinical-md);
}

.arabic-heading-3,
.ar-h3 {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-2xl);
  font-weight: var(--font-semibold);
  line-height: var(--leading-normal);
  color: var(--clinical-text-primary);
  margin-bottom: var(--space-clinical-md);
}

.arabic-heading-4,
.ar-h4 {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-xl);
  font-weight: var(--font-medium);
  line-height: var(--leading-normal);
  color: var(--clinical-text-primary);
  margin-bottom: var(--space-clinical-sm);
}

.arabic-heading-5,
.ar-h5 {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-lg);
  font-weight: var(--font-medium);
  line-height: var(--leading-normal);
  color: var(--clinical-text-secondary);
  margin-bottom: var(--space-clinical-sm);
}

.arabic-heading-6,
.ar-h6 {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-base);
  font-weight: var(--font-medium);
  line-height: var(--leading-normal);
  color: var(--clinical-text-secondary);
  margin-bottom: var(--space-clinical-xs);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Arabic Body Text Styles */
.arabic-body,
.ar-body {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-base);
  font-weight: var(--font-normal);
  line-height: var(--leading-relaxed);
  color: var(--clinical-text-primary);
}

.arabic-body-large,
.ar-body-lg {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-lg);
  font-weight: var(--font-normal);
  line-height: var(--leading-relaxed);
  color: var(--clinical-text-primary);
}

.arabic-body-small,
.ar-body-sm {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-sm);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
  color: var(--clinical-text-secondary);
}

.arabic-caption,
.ar-caption {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-xs);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
  color: var(--clinical-text-tertiary);
}

/* Arabic Medical/Clinical Text Styles */
.arabic-medical-label,
.ar-medical-label {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  line-height: var(--leading-tight);
  color: var(--clinical-text-primary);
  text-transform: uppercase;
  letter-spacing: 0.025em;
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.arabic-medical-label::before {
  content: '';
  width: 3px;
  height: 12px;
  background: var(--healthcare-primary);
  border-radius: var(--radius-sm);
  opacity: 0.7;
}

.arabic-medical-value,
.ar-medical-value {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-base);
  font-weight: var(--font-medium);
  line-height: var(--leading-normal);
  color: var(--healthcare-primary-dark);
  background: linear-gradient(135deg, var(--healthcare-primary-50) 0%, var(--healthcare-primary-100) 100%);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-clinical-badge);
  display: inline-block;
  border: 1px solid var(--healthcare-primary-100);
  position: relative;
  overflow: hidden;
}

.arabic-medical-value::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.6s ease;
}

.arabic-medical-value:hover::before {
  left: 100%;
}

.arabic-medical-description,
.ar-medical-desc {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-sm);
  font-weight: var(--font-normal);
  line-height: var(--leading-relaxed);
  color: var(--clinical-text-secondary);
  font-style: italic;
}

/* =================================
   RTL LAYOUT UTILITIES
   ================================= */

/* RTL-aware spacing utilities */
.rtl-mr-0 { margin-right: 0 !important; }
.rtl-mr-1 { margin-right: var(--space-1) !important; }
.rtl-mr-2 { margin-right: var(--space-2) !important; }
.rtl-mr-3 { margin-right: var(--space-3) !important; }
.rtl-mr-4 { margin-right: var(--space-4) !important; }
.rtl-mr-6 { margin-right: var(--space-6) !important; }
.rtl-mr-8 { margin-right: var(--space-8) !important; }

.rtl-ml-0 { margin-left: 0 !important; }
.rtl-ml-1 { margin-left: var(--space-1) !important; }
.rtl-ml-2 { margin-left: var(--space-2) !important; }
.rtl-ml-3 { margin-left: var(--space-3) !important; }
.rtl-ml-4 { margin-left: var(--space-4) !important; }
.rtl-ml-6 { margin-left: var(--space-6) !important; }
.rtl-ml-8 { margin-left: var(--space-8) !important; }

.rtl-pr-0 { padding-right: 0 !important; }
.rtl-pr-1 { padding-right: var(--space-1) !important; }
.rtl-pr-2 { padding-right: var(--space-2) !important; }
.rtl-pr-3 { padding-right: var(--space-3) !important; }
.rtl-pr-4 { padding-right: var(--space-4) !important; }
.rtl-pr-6 { padding-right: var(--space-6) !important; }
.rtl-pr-8 { padding-right: var(--space-8) !important; }

.rtl-pl-0 { padding-left: 0 !important; }
.rtl-pl-1 { padding-left: var(--space-1) !important; }
.rtl-pl-2 { padding-left: var(--space-2) !important; }
.rtl-pl-3 { padding-left: var(--space-3) !important; }
.rtl-pl-4 { padding-left: var(--space-4) !important; }
.rtl-pl-6 { padding-left: var(--space-6) !important; }
.rtl-pl-8 { padding-left: var(--space-8) !important; }

/* RTL-aware flexbox utilities */
.rtl-flex-row-reverse {
  flex-direction: row-reverse;
}

.rtl-justify-start {
  justify-content: flex-start;
}

.rtl-justify-end {
  justify-content: flex-end;
}

[dir="rtl"] .rtl-auto-reverse {
  flex-direction: row-reverse;
}

[dir="ltr"] .rtl-auto-reverse {
  flex-direction: row;
}

/* RTL-aware text alignment */
.rtl-text-start {
  text-align: start;
}

.rtl-text-end {
  text-align: end;
}

[dir="rtl"] .rtl-text-right {
  text-align: right;
}

[dir="ltr"] .rtl-text-right {
  text-align: left;
}

[dir="rtl"] .rtl-text-left {
  text-align: left;
}

[dir="ltr"] .rtl-text-left {
  text-align: right;
}

/* Enhanced Arabic Medical Terminology Support */
.arabic-medical-terminology {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-base);
  font-weight: var(--font-medium);
  line-height: var(--leading-relaxed);
  color: var(--clinical-text-primary);
  direction: rtl;
  text-align: right;
  unicode-bidi: isolate;
  font-feature-settings: 'liga' on, 'kern' on, 'mark' on, 'mkmk' on, 'ccmp' on;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

.arabic-medical-terminology:hover {
  color: var(--healthcare-primary);
  transition: color var(--duration-fast) var(--ease-clinical);
}

/* Arabic Drug/Medication Names */
.arabic-medication-name {
  font-family: var(--font-arabic-secondary);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--healthcare-warning-dark);
  background: var(--healthcare-warning-50);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-clinical-badge);
  border: 1px solid var(--healthcare-warning-100);
  display: inline-block;
  direction: rtl;
}

/* Arabic Patient Information */
.arabic-patient-info {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-sm);
  font-weight: var(--font-normal);
  color: var(--healthcare-success-dark);
  background: var(--healthcare-success-50);
  padding: var(--space-2);
  border-radius: var(--radius-clinical-card);
  border-right: 4px solid var(--healthcare-success);
  direction: rtl;
  text-align: right;
}

[dir="ltr"] .arabic-patient-info {
  border-right: none;
  border-left: 4px solid var(--healthcare-success);
  text-align: left;
  direction: ltr;
}

/* =================================
   HEALTHCARE-SPECIFIC RTL STYLES
   ================================= */

/* OID Tree RTL Optimization */
.oid-tree-node {
  display: flex;
  align-items: center;
  padding: var(--space-clinical-sm) var(--space-clinical-md);
  border-radius: var(--radius-clinical-card);
  transition: var(--transition-clinical-fast);
}

[dir="rtl"] .oid-tree-node {
  flex-direction: row-reverse;
  text-align: right;
}

[dir="ltr"] .oid-tree-node {
  flex-direction: row;
  text-align: left;
}

/* OID Tree Indentation */
.oid-tree-indent {
  display: inline-block;
}

[dir="rtl"] .oid-tree-indent {
  margin-right: var(--tree-indent-size);
  margin-left: 0;
}

[dir="ltr"] .oid-tree-indent {
  margin-left: var(--tree-indent-size);
  margin-right: 0;
}

/* Healthcare Badge RTL */
.healthcare-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-clinical-badge);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  line-height: 1;
}

[dir="rtl"] .healthcare-badge {
  flex-direction: row-reverse;
}

[dir="rtl"] .healthcare-badge .badge-icon {
  margin-left: var(--space-1);
  margin-right: 0;
}

[dir="ltr"] .healthcare-badge .badge-icon {
  margin-right: var(--space-1);
  margin-left: 0;
}

/* Medical Form Layouts */
.medical-form-group {
  margin-bottom: var(--space-clinical-md);
}

.medical-form-label {
  display: block;
  margin-bottom: var(--space-clinical-xs);
  font-weight: var(--font-medium);
  color: var(--clinical-text-primary);
}

[dir="rtl"] .medical-form-label {
  text-align: right;
}

[dir="ltr"] .medical-form-label {
  text-align: left;
}

/* Clinical Data Tables RTL */
.clinical-table {
  width: 100%;
  border-collapse: collapse;
  background-color: var(--clinical-bg-tertiary);
  border-radius: var(--radius-clinical-card);
  overflow: hidden;
}

[dir="rtl"] .clinical-table th,
[dir="rtl"] .clinical-table td {
  text-align: right;
}

[dir="ltr"] .clinical-table th,
[dir="ltr"] .clinical-table td {
  text-align: left;
}

.clinical-table th:first-child,
.clinical-table td:first-child {
  border-radius: 0;
}

[dir="rtl"] .clinical-table th:first-child,
[dir="rtl"] .clinical-table td:first-child {
  padding-right: var(--space-clinical-md);
}

[dir="ltr"] .clinical-table th:first-child,
[dir="ltr"] .clinical-table td:first-child {
  padding-left: var(--space-clinical-md);
}

/* =================================
   ARABIC NUMBER FORMATTING
   ================================= */

/* Arabic-Indic Numerals Support */
.arabic-numerals {
  font-variant-numeric: tabular-nums;
}

/* Force Arabic-Indic numerals when appropriate */
.force-arabic-numerals {
  font-feature-settings: 'numr' on;
}

/* Western numerals in Arabic context (for medical data) */
.western-numerals {
  font-variant-numeric: lining-nums tabular-nums;
  direction: ltr;
  unicode-bidi: embed;
}

/* Enhanced Arabic Medical Formatting */
.arabic-medical-code {
  font-family: var(--font-arabic-monospace);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--healthcare-info-dark);
  background: var(--clinical-bg-secondary);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  border: 1px solid var(--clinical-border-primary);
  font-variant-numeric: tabular-nums;
  letter-spacing: 0.025em;
}

.arabic-medical-date {
  font-family: var(--font-arabic-primary);
  font-size: var(--text-sm);
  font-weight: var(--font-normal);
  color: var(--clinical-text-secondary);
  direction: rtl;
  unicode-bidi: embed;
}

.arabic-medical-priority {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  font-family: var(--font-arabic-primary);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-clinical-badge);
}

.arabic-medical-priority.priority-critical {
  color: var(--healthcare-critical-dark);
  background: var(--healthcare-critical-50);
  border: 1px solid var(--healthcare-critical);
  animation: priority-pulse 2s ease-in-out infinite;
}

.arabic-medical-priority.priority-high {
  color: var(--healthcare-warning-dark);
  background: var(--healthcare-warning-50);
  border: 1px solid var(--healthcare-warning);
}

.arabic-medical-priority.priority-normal {
  color: var(--healthcare-success-dark);
  background: var(--healthcare-success-50);
  border: 1px solid var(--healthcare-success);
}

@keyframes priority-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* =================================
   RESPONSIVE ARABIC TYPOGRAPHY
   ================================= */

/* Mobile Arabic Typography - Enhanced for Clinical Devices */
@media (max-width: 480px) {
  .arabic-heading-1, .ar-h1 {
    font-size: var(--text-3xl);
    line-height: var(--leading-tight);
  }
  
  .arabic-heading-2, .ar-h2 {
    font-size: var(--text-2xl);
    line-height: var(--leading-tight);
  }
  
  .arabic-heading-3, .ar-h3 {
    font-size: var(--text-xl);
    line-height: var(--leading-normal);
  }
  
  .arabic-body, .ar-body {
    font-size: var(--text-base);
    line-height: var(--leading-relaxed);
  }
  
  /* Enhanced mobile medical typography */
  .arabic-medical-value {
    font-size: var(--text-sm);
    padding: var(--space-1) var(--space-2);
  }
  
  .arabic-medical-label {
    font-size: var(--text-xs);
  }
  
  .arabic-medical-terminology {
    font-size: var(--text-sm);
    line-height: var(--leading-relaxed);
  }
  
  /* Mobile-optimized medical cards */
  .arabic-patient-info {
    padding: var(--space-clinical-sm);
    font-size: var(--text-sm);
  }
  
  .arabic-medical-priority {
    font-size: 10px;
    padding: var(--space-1) var(--space-1);
  }
  
  /* Reduce spacing on mobile */
  .oid-tree-node {
    padding: var(--space-clinical-xs) var(--space-clinical-sm);
    min-height: 48px; /* Larger touch target for clinical use */
  }
  
  [dir="rtl"] .oid-tree-indent,
  [dir="ltr"] .oid-tree-indent {
    margin: 0 calc(var(--tree-indent-size) * 0.75);
  }
  
  /* Ensure readability on small screens */
  .compliance-status-container {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-2);
  }
  
  .bilingual-content {
    gap: var(--space-2);
  }
}

/* Tablet Arabic Typography */
@media (min-width: 481px) and (max-width: 768px) {
  .arabic-heading-1, .ar-h1 {
    font-size: var(--text-4xl);
  }
  
  .arabic-body, .ar-body {
    font-size: var(--text-base);
    line-height: var(--leading-relaxed);
  }
}

/* Desktop Arabic Typography - Optimized for clinical workstations */
@media (min-width: 1200px) {
  .arabic-heading-1, .ar-h1 {
    font-size: calc(var(--text-4xl) * 1.1);
    letter-spacing: -0.02em;
  }
  
  .arabic-body-large, .ar-body-lg {
    font-size: var(--text-xl);
    line-height: var(--leading-relaxed);
  }
  
  /* Enhanced medical typography for large displays */
  .arabic-medical-value {
    font-size: var(--text-lg);
    padding: var(--space-3) var(--space-4);
  }
  
  .arabic-medical-label {
    font-size: var(--text-base);
  }
  
  .arabic-medical-terminology {
    font-size: var(--text-lg);
    line-height: var(--leading-relaxed);
  }
  
  /* Enhanced spacing for large screens */
  .oid-tree-node {
    padding: var(--space-clinical-md) var(--space-clinical-lg);
  }
  
  /* Large screen medical layouts */
  .arabic-patient-info {
    padding: var(--space-clinical-lg);
    font-size: var(--text-base);
  }
  
  .compliance-status-container {
    gap: var(--space-4);
  }
  
  .bilingual-content {
    gap: var(--space-3);
  }
  
  /* Enhanced tooltips for desktop */
  .healthcare-tooltip {
    max-width: 450px;
    font-size: var(--text-base);
    padding: var(--space-clinical-md) var(--space-clinical-lg);
  }
}

/* =================================
   ACCESSIBILITY ENHANCEMENTS
   ================================= */

/* High contrast mode for Arabic text */
@media (prefers-contrast: high) {
  .arabic-heading-1, .ar-h1,
  .arabic-heading-2, .ar-h2,
  .arabic-heading-3, .ar-h3,
  .arabic-heading-4, .ar-h4,
  .arabic-heading-5, .ar-h5,
  .arabic-heading-6, .ar-h6 {
    color: var(--clinical-text-primary);
    text-shadow: 0 0 1px currentColor;
    font-weight: var(--font-bold);
  }
  
  .arabic-body, .ar-body,
  .arabic-body-large, .ar-body-lg,
  .arabic-body-small, .ar-body-sm {
    color: var(--clinical-text-primary);
    font-weight: var(--font-medium);
  }
  
  .arabic-medical-value,
  .arabic-medical-label,
  .arabic-medical-terminology {
    background: transparent !important;
    border: 2px solid var(--clinical-text-primary) !important;
    color: var(--clinical-text-primary) !important;
    font-weight: var(--font-bold);
  }
  
  .arabic-medical-priority {
    border-width: 3px !important;
    font-weight: var(--font-extrabold);
    text-shadow: 0 0 2px currentColor;
  }
  
  .compliance-status-container > * {
    border: 2px solid var(--clinical-text-primary) !important;
    background: transparent !important;
    color: var(--clinical-text-primary) !important;
    font-weight: var(--font-bold);
  }
}

/* Reduced motion for Arabic animations */
@media (prefers-reduced-motion: reduce) {
  .oid-tree-node,
  .healthcare-badge,
  .medical-form-group,
  .arabic-medical-value,
  .arabic-medical-priority,
  .compliance-status-container > * {
    transition: none;
    animation: none;
  }
  
  .arabic-medical-value::before {
    display: none;
  }
  
  .arabic-medical-priority.priority-critical {
    animation: none;
  }
}

/* Enhanced Focus styles for RTL and Medical Context */
[dir="rtl"] *:focus,
[dir="ltr"] *:focus {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  border-radius: var(--radius-clinical-button);
  box-shadow: 0 0 0 var(--focus-ring-width) var(--healthcare-primary-50);
}

/* Enhanced focus for medical priority elements */
.arabic-medical-priority:focus {
  outline: 3px solid var(--healthcare-primary);
  outline-offset: 2px;
  transform: scale(1.05);
}

.arabic-medical-value:focus {
  outline: 2px solid var(--healthcare-primary);
  outline-offset: 2px;
  box-shadow: 0 0 10px var(--healthcare-primary-50);
}

/* Keyboard navigation for medical forms */
.arabic-medical-terminology:focus {
  background: var(--healthcare-primary-50);
  outline: 2px solid var(--healthcare-primary);
  border-radius: var(--radius-clinical-card);
  padding: var(--space-1);
}

/* Print styles for Arabic medical documents */
@media print {
  .arabic-heading-1, .ar-h1,
  .arabic-heading-2, .ar-h2,
  .arabic-heading-3, .ar-h3,
  .arabic-body, .ar-body {
    color: #000000 !important;
    font-weight: var(--font-semibold);
  }
  
  .arabic-medical-value,
  .arabic-medical-label,
  .arabic-medical-terminology,
  .arabic-patient-info {
    color: #000000 !important;
    background: transparent !important;
    border: 1px solid #000000;
  }
  
  .arabic-medical-priority {
    color: #000000 !important;
    background: transparent !important;
    border: 2px solid #000000;
    font-weight: var(--font-bold);
  }
  
  .arabic-medical-priority.priority-critical::before {
    content: 'âš  ';
  }
  
  .arabic-medical-priority.priority-high::before {
    content: '! ';
  }
  
  .healthcare-badge {
    border: 1px solid #000000;
    background-color: transparent !important;
    color: #000000 !important;
  }
  
  .compliance-status-container > * {
    border: 1px solid #000000 !important;
    background: transparent !important;
    color: #000000 !important;
  }
  
  /* Print page breaks */
  .healthcare-card {
    break-inside: avoid;
    page-break-inside: avoid;
  }
  
  .node-detail-panel {
    break-before: page;
  }
}